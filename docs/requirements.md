# ScaffAI - 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**ScaffAI（スカフエーアイ）**

### 1.2 プロジェクトの目的
建設現場における足場設計・計算業務のデジタル化を推進し、作業効率向上と安全性確保を実現する包括的な足場計算プラットフォームの開発。

### 1.3 対象ユーザー
- **現場作業者**: 足場組立・解体作業員
- **現場監督**: 工事現場の管理責任者
- **設計者**: 足場設計専門技術者
- **企業管理者**: 建設会社の管理部門

### 1.4 解決する課題
- 手計算による計算ミスとリスク
- 現場での迅速な計算ニーズ
- 設計データの共有・管理の非効率性
- 法規制遵守の複雑性

## 2. 機能要件

### 2.1 核心機能

#### 2.1.1 足場計算エンジン
- **入力パラメータ**:
  - 建物寸法（南北・東西の躯体幅）
  - 軒の出（4方向: 北・東・南・西）
  - 境界線制約（隣地境界線からの距離）
  - 特殊部材（355mm、300mm、150mm）
  - 屋根形状（フラット・勾配軒・陸屋根）
  - 基準高さ・段数
  - 目標離れ（4方向個別設定）

- **計算出力**:
  - スパン構成（南北・東西のスパン配置）
  - 離れ情報（4方向の離れ距離）
  - 段数・高さ（足場段数、ジャッキ上げ高さ）
  - 安全性判定（根がらみ支柱の必要性）
  - 部材数量（基本部材・特殊部材の必要数）

#### 2.1.2 簡易割付計算
- **逆算機能**: 目標離れから最適なスパン構成を自動算出
- **補正計算**: 小寸法部材（300mm、150mm）での微調整
- **制約最適化**: 境界線制約を考慮した最適解の提示

#### 2.1.3 計算検証機能
- **安全基準チェック**: 建築基準法・労働安全衛生法準拠
- **構造安定性**: 根がらみ支柱の必要性自動判定
- **警告・エラー表示**: 危険な設定の事前警告

### 2.2 ユーザー管理機能

#### 2.2.1 認証・アカウント管理
- **ユーザー登録**: メールアドレス・パスワード認証
- **プロフィール管理**: 
  - 基本情報（氏名、会社名、部署、連絡先）
  - 資格情報（足場組立作業主任者等）
  - XP・レベルシステム（ゲーミフィケーション）

#### 2.2.2 データ管理
- **計算履歴**: 無制限の計算履歴保存・検索
- **プロジェクト管理**: 計算結果のプロジェクト別分類
- **クラウド同期**: デバイス間でのデータ同期
- **データエクスポート**: CSV、PDF形式での出力

#### 2.2.3 チーム・共有機能
- **チーム管理**: 複数ユーザーでのプロジェクト共有
- **権限管理**: 閲覧・編集権限の細かな設定
- **コメント機能**: 計算結果への注釈・議論

### 2.3 課金・プラン管理

#### 2.3.1 プラン構成
- **Free**: 制限付き基本機能（月10回計算）
- **Plus（¥4,980/月）**: 無制限計算、履歴保存
- **Pro（¥12,800/月）**: Web版、作図機能、高度な計算
- **Max（¥24,800/月）**: CAD連携、API、企業向け機能

#### 2.3.2 決済管理
- **サブスクリプション**: 自動継続課金
- **プラン変更**: 即座のプランアップグレード・ダウングレード
- **請求書発行**: 企業向け請求書・領収書発行

### 2.4 特殊機能

#### 2.4.1 電卓モード
- **立面計算**: 高さ方向の部材計算
- **平面計算**: 水平方向のスパン計算
- **音声入力**: 現場での音声による数値入力（開発予定）

#### 2.4.2 描画機能（Web版限定）
- **リアルタイム描画**: 入力値変更時の即座な図面更新
- **多層管理**: 複数階層の足場設計
- **図面編集**: 手動での微調整・カスタマイズ
- **CAD連携**: DXF/DWG形式での入出力（開発予定）

#### 2.4.3 現場支援機能
- **QRコード**: 設計データの現場共有
- **写真管理**: 設計と現場写真の関連付け
- **進捗管理**: 工事進捗との連携
- **安全チェック**: 組立完了時の安全確認

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **計算速度**: 通常計算は1秒以内で結果表示
- **UI応答性**: 60FPS でのスムーズなユーザーインターフェース
- **同時接続**: 1000ユーザーの同時利用に対応
- **データ同期**: 5秒以内でのクラウド同期完了

### 3.2 可用性・信頼性
- **稼働率**: 99.9% 以上のサービス稼働率
- **バックアップ**: 日次自動バックアップと即座の復旧体制
- **障害対応**: 24時間以内の障害復旧
- **データ整合性**: 計算結果の100%の正確性保証

### 3.3 セキュリティ要件
- **データ暗号化**: 通信・保存時のAES-256暗号化
- **認証セキュリティ**: 多要素認証（MFA）対応
- **アクセス制御**: Role-Based Access Control (RBAC)
- **監査ログ**: 全操作の詳細ログ記録
- **GDPR準拠**: 個人情報保護規則への完全準拠

### 3.4 対応プラットフォーム
- **モバイル**: 
  - iOS 14.0 以上
  - Android 8.0 (API level 26) 以上
- **Web**: 
  - Chrome 90+
  - Safari 14+
  - Edge 90+
  - Firefox 88+
- **PWA**: オフライン機能、ホーム画面追加対応

### 3.5 UI/UX要件
- **レスポンシブデザイン**: 全デバイスサイズに最適化
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **多言語対応**: 日本語・英語・韓国語・中国語
- **ダークモード**: システム設定との自動連動
- **現場配慮**: 手袋着用時の操作性考慮

### 3.6 拡張性・保守性
- **モジュール設計**: 機能追加時の影響範囲最小化
- **API設計**: RESTful API による外部連携
- **ログ・監視**: 包括的なログ収集と性能監視
- **自動デプロイ**: CI/CD パイプラインによる自動展開

## 4. 技術要件

### 4.1 システム構成
- **アーキテクチャ**: マイクロサービス・アーキテクチャ
- **フロントエンド**: React Native (モバイル) + Next.js (Web)
- **バックエンド**: Supabase (BaaS)
- **データベース**: PostgreSQL
- **インフラ**: Vercel (Web) + Expo Application Services (モバイル)

### 4.2 開発要件
- **言語**: TypeScript (95%以上), Python (計算エンジン)
- **状態管理**: Zustand + React Context
- **UI フレームワーク**: React Native Elements + Radix UI
- **テスト**: Jest + Playwright + Detox
- **品質管理**: ESLint + Prettier + SonarQube

### 4.3 セキュリティ技術
- **認証**: Supabase Auth (JWT)
- **認可**: Row Level Security (RLS)
- **通信**: HTTPS/TLS 1.3
- **入力検証**: Zod による厳密な型検証

## 5. 制約条件

### 5.1 技術的制約
- **Expo制限**: React Native の一部ネイティブ機能制限
- **PWA制限**: iOS での通知・バックグラウンド処理制限
- **Supabase制限**: 無料枠の同時接続数・ストレージ制限
- **計算精度**: 浮動小数点演算の精度限界

### 5.2 法的・規制制約
- **建築基準法**: 足場設計基準への準拠必須
- **労働安全衛生法**: 安全基準の厳格な遵守
- **個人情報保護法**: ユーザーデータの適切な管理
- **著作権法**: 使用ライブラリのライセンス遵守

### 5.3 ビジネス制約
- **開発予算**: 限られた予算内での機能実装
- **リリース期限**: 段階的リリースによる早期市場投入
- **競合対応**: 既存ソリューションとの差別化必須
- **ユーザー教育**: 新技術導入に伴うユーザー教育コスト

## 6. 受入基準

### 6.1 機能受入基準
- **計算精度**: Python版計算エンジンとの100%一致
- **処理速度**: 通常計算1秒以内、複雑計算3秒以内
- **UI/UX**: ユーザビリティテストでの満足度80%以上
- **安全性**: 法規制チェック機能の100%正確性

### 6.2 品質受入基準
- **テストカバレッジ**: 80%以上のコードカバレッジ
- **バグ率**: 重大バグゼロ、軽微バグ月5件以下
- **パフォーマンス**: 応答時間90%が目標値内
- **セキュリティ**: 脆弱性スキャン100%パス

### 6.3 運用受入基準
- **稼働率**: 月間稼働率99.9%以上
- **サポート**: 24時間以内の問い合わせ対応
- **ドキュメント**: 完全なユーザーマニュアル・技術文書
- **トレーニング**: ユーザー向け研修資料の完備

## 7. プロジェクト成功指標

### 7.1 技術指標
- **アプリストア評価**: 4.5星以上の評価維持
- **クラッシュ率**: 0.1%以下のクラッシュ率
- **ロード時間**: 初回起動3秒以内
- **メモリ使用量**: 150MB以下での安定動作

### 7.2 ビジネス指標
- **ユーザー数**: 6ヶ月で1万ユーザー獲得
- **継続率**: 月間アクティブユーザー70%以上
- **収益**: 月間売上100万円突破
- **顧客満足度**: NPS（Net Promoter Score）50以上

---

**文書管理情報**
- 作成日: 2025年6月26日
- 版数: 1.0
- 作成者: ScaffAI開発チーム
- 承認者: プロジェクトマネージャー
- 次回レビュー: 2025年7月26日